[TOC]

### 1、服务器等概述

```txt
服务器大小由高度定义，单位为U，以下分别为1U，2U，4U服务器。
```

---

服务器云厂商

```shell
https://www.aliyun.com/        #阿里云
https://cloud.tencent.com/     #腾讯云
```



### 2、Linux系统概述

```shell
[root@localhost ~]#
root				表示登录的用户名
@					表示用户名和主机名之间的分隔符，没有特殊含义，就是起到一个分隔的作用
localhost			表示的是主机名
~					表示用户的家目录，家目录的意思就是Linux系统会为每一个用户在linux系统里面都创建一个只属于用户自己的目录，这个目录就叫用户的家目录
```

#表示当前登录为root用户

$表示当前登录为普通用户

---

#### 2.1.Linux系统目录及其含义

```shell
/ 			系统根目录，所有文件的入口
/bin		二进制文件目录，存放用户级GNU实用工具，存放系统命令的目录
/sbin		系统二进制文件目录，存放了很多管理级的GNU实用工具，存放管理员使用的命令的目录
/boot		存放系统启动的时候需要读取的引导文件的目录
/dev		存放磁盘信息和把硬件设备映射成文件的目录，Linux在其中创建设备节点
/etc		存放配置文件
/home		普通用户的家目录
/root		root用户的家目录
/lib		32位系统动态库目录
/lib64		64位系统动态库目录
/media		由系统自动挂载的硬件会放在这个目录，比如u盘或者光盘
/mnt		由用户手动挂载的硬件会放在这个目录，比如u盘或者光盘	
/opt		安装软件的位置
/proc		内存相关的映射文件和内核运行时的状态信息的目录，需要关注一下
/run		系统运行时产生的文件			
/srv		服务运行时数据存放的目录
/sys		系统文件
/tmp		临时目录，就是linux系统的回收站，这里的文件每隔一段时间就会被系统自动清理掉
			默认是每隔10天就会清理掉/tmp目录下面的所有内容，所以不要把文件放在这个目录里面
            
/usr		存放系统数据文件，/bin,/sbin,/lib,/lib64这几个目录存放的文件的真正位置都在/usr里面		
/var		存放经常变动的文件，和各种系统服务的日志文件
```

#### 2.2.开关机相关命令

```shell
shutdown
关机和重启命令
-h 关机
-r 重启
now 立即
shutdown -h now  立即关机
shutdown -r now  立即重启
poweroff         立即关机
reboot now       立即重启
#shutdown会等待进程完成后操作，较为舒缓
#poweroff和reboot比较粗暴
```

### 3.目录和文件相关命令

#### 3.1 pwd

```shell
pwd  显示当前工作目录
```

例1:

<img src="F:\运维笔记\笔记\图片\pwd.PNG" style="zoom:150%;" />

​             

#### 3.2.tree

```shell
tree
以树状方式列出目录的内容，会显示指定目录下的所有文件，包括子目录里的文件
可以使用下面的参数
-C 在文件和目录清单加上色彩，便于区分各种类型
-d 只显示目录，不显示文件
-u 列出文件或目录的所有者名称
```

---

#### 3.3.cd

```shell
cd
切换目录的命令
cd ..				表示返回当前目录的上一级目录
cd ../..			表示返回当前目录的上一级目录的上一级目录
cd -				表示返回上一次cd操作所在的目录
cd ~				表示返回用户家目录
cd					表示返回用户家目录，这俩个命令都可以返回家目录，大家根据自己需要选择一个使用就行了
cd 想切换到的目录	    表示切换到想切换到的目录里面

#绝对路径和相对路径
#绝对路径就是从根目录开始写			
#相对路径就是从当前目录开始写,比如我们现在在etc目录，然后使用相对路径访问system.conf就可以使用下面的方式
```

----

#### 3.4.touch

```shell
touch
创建一个空文件的命令，比如下面这样
touch file1
这样就创建了一个file1的空文件,这个文件里面没有任何内容
也可以同时创建多个文件，多个文件之间使用空格隔开
touch tomcat.txt ngxin.txt redis.txt
这样就同时创建了3个文件
touch file{1..3}
创建了file1 file2 file3
```

---

#### 3.5.mkdir

```shell
mkdir
-p				创建多个具有层级关系的目录
-v				显示目录创建的过程
如果要一次创建多个目录，就使用下面的方式，用空格把要创建的多个目录互相隔开
mkdir a b c d
这样就一次性创建了4个目录，分别是a目录，b目录，c目录，d目录
如果想一次创建多个具有层级关系的目录，那么就需要使用-p参数，比如要在根目录下面创建一个a目录，然后在a目录下面还想要创建一个b目录,在b目录里面还需要创建一个c目录，这个时候就需要使用-p参数，来一次性把这三个具有层级关系的目录都创建了
mkdir -p a/b/c
这样就一次性把这3个具有层级关系的目录一起创建了
```

---

#### 3.6.rm

```shell
rm
删除文件或者目录的命令，可以使用下面几个参数
-f		强制删除,没有提示
-r		如果要删除目录，必须要加上这个参数，不然无法删除目录
如果要删除文件，不加-f参数，那么在删除的时候，就会有提示确认是否真的要删除这个文件
如果加了-f参数，就会直接删除文件，不会有提示
如果要删除目录，就必须要使用
rm -rf 目录名称		这样才能删除目录
如果想把某个目录下面的所有文件和目录都删除，先切换到这个目录，然后使用下面的命令
rm -rf *
*表示的就是所有的意思
这样就可以把这个目录下面的所有文件和目录都删除
```

**大家在使用这个命令的时候，一定要慎重，因为文件或者目录删除了，就找不回来了**
**在生产环境中，如果要执行删除操作，在进行删除之前，一定要先备份，然后在删除**

---

#### 3.7.mv

```shell
mv
移动文件或者目录的命令

如果要移动文件，那么就使用下面的方式
mv [要移动的文件名] [要移动到的目录]

mv hello /app/
把当前目录下面的hello文件移动到/app目录下面

如果要移动多个文件到/app目录下面
mv aaa bbb ccc /app/
mv命令也可以给文件改名字，比如像下面这样使用
mv aaa kkk
这样就把aaa文件名改成了kkk

移动目录和移动文件差不多，使用的方式和上面是一样的，
比如要把当前目录下面的hello目录移动到，/app/logs目录下面
mv hello /app/logs/

如果要移动多个目录到/app/logs目录下面
mv aaa bbb ccc /app/logs/

mv命令也可以给目录改名字，比如像下面这样使用
mv aaa kkk
这样就把aaa目录名改成了kkk

如果只想移动目录下面的内容，而不想移动目录本身，那么就使用下面的命令
mv han/*  app/
这样就会把han目录下面的所有文件和目录都移动到app目录下面，但是han目录本身不会移动
```

**在执行mv命令的时候需要注意，如果要移动到的目录里面有同名的文件或者目录，那么会覆盖原来的内容，这一点需要特别注意**

例7：

```shell
[root@yangjun tree1]# tree
.
├── file4.txt
├── file5.txt
├── file6.txt
├── test1
│   ├── file1.txt
│   ├── file2.txt
│   └── file3.txt
├── test2
├── test3
└── tree2
    ├── file3
    ├── file4
    └── tree3
        ├── file5
        └── file6

5 directories, 10 files
[root@yangjun tree1]# mv file4.txt test2
[root@yangjun tree1]# tree
.
├── file5.txt
├── file6.txt
├── test1
│   ├── file1.txt
│   ├── file2.txt
│   └── file3.txt
├── test2
│   └── file4.txt
├── test3
└── tree2
    ├── file3
    ├── file4
    └── tree3
        ├── file5
        └── file6

5 directories, 10 files
[root@yangjun tree1]# mv file5.txt file6.txt test3
[root@yangjun tree1]# tree
.
├── test1
│   ├── file1.txt
│   ├── file2.txt
│   └── file3.txt
├── test2
│   └── file4.txt
├── test3
│   ├── file5.txt
│   └── file6.txt
└── tree2
    ├── file3
    ├── file4
    └── tree3
        ├── file5
        └── file6

5 directories, 10 files
[root@yangjun tree1]# mv test2/file4.txt test2/file0.txt
[root@yangjun tree1]# tree
.
├── test1
│   ├── file1.txt
│   ├── file2.txt
│   └── file3.txt
├── test2
│   └── file0.txt
├── test3
│   ├── file5.txt
│   └── file6.txt
└── tree2
    ├── file3
    ├── file4
    └── tree3
        ├── file5
        └── file6

5 directories, 10 files
[root@yangjun tree1]# mv test2 test3 tree2/
[root@yangjun tree1]# tree
.
├── test1
│   ├── file1.txt
│   ├── file2.txt
│   └── file3.txt
└── tree2
    ├── file3
    ├── file4
    ├── test2
    │   └── file0.txt
    ├── test3
    │   ├── file5.txt
    │   └── file6.txt
    └── tree3
        ├── file5
        └── file6

5 directories, 10 files
[root@yangjun tree1]# mv test1 test
[root@yangjun tree1]# tree
.
├── test
│   ├── file1.txt
│   ├── file2.txt
│   └── file3.txt
└── tree2
    ├── file3
    ├── file4
    ├── test2
    │   └── file0.txt
    ├── test3
    │   ├── file5.txt
    │   └── file6.txt
    └── tree3
        ├── file5
        └── file6

5 directories, 10 files
```

---

#### 3.8.cp

```shell
cp
复制文件或者目录的命令，相当于windows系统里面的复制，可以使用下面的参数
-r			递归复制,但是会改变源目录或者源文件的属性和时间，了解就可以
-a			递归复制并且不改变源目录或者源文件的属性和时间，如果不想改变源目录或者源文件的属性和时间就使用这个参数，推荐使用这个参数进行复制
如果复制的是文件，就使用下面的方式
cp -a hello come
上面的意思就是把当前目录下的hello文件复制一份，复制后的文件名叫come，
也可以把文件复制到别的目录下面
cp -a hello /app/
这个命令就是把当前目录下的hello文件复制一份，然后把复制的文件放到/app目录下面，复制后的文件名还是叫原来的名字
如果想修改复制后的文件名，就这样使用
cp -a hello /app/come
这样就把当前目录下的hello文件复制一份，然后把复制的文件放到/app目录下面，复制后的文件名叫come
如果想复制多个文件，就使用下面的方式
cp -a aaa bbb ccc /app/
这样就可以把aaa bbb ccc这三个文件每个都复制一份，然后把复制的文件放到/app目录下面，复制后的文件名还是叫原来的名字

复制目录和复制文件的操作基本上都差不多
比如要把当前目录下面的hello目录复制一份，然后把复制的目录放到/app/目录下面,复制后的目录名还是叫原来的名字
cp -a hello /app/
如果想修改复制后的目录名，就这样使用
cp -a hello /app/come
这样就把当前目录下的hello目录复制一份，然后把复制的目录放到/app目录下面，复制后的目录名叫come
如果想复制多个目录，就使用下面的方式
cp -a aaa bbb ccc /app/
这样就可以把aaa bbb ccc这三个目录每个都复制一份，然后把复制的目录放到/app目录下面，复制后的目录名还是叫原来的名字
如果只是想把hello目录下面的所有内容复制一份到/app目录下面，hello目录本身不想复制，那么就使用下面的方式
cp -a hello/* /app/
这样就可以把hello目录下面的所有内容复制一份放到/app目录下面，但是hello目录本身没有被复制到/app目录下面
```

**在执行cp命令的时候需要注意，如果要复制到的目录里面有同名的文件或者目录，那么会覆盖原来的内容，这一点需要特别注意***

### 4.常用的快捷键

```sh
tab					命令或者文件或者目录自动补全
ctrl+a				光标移动到行首
ctrl+e				光标移动到行尾
ctrl+l				清除屏幕上的所有内容
ctrl+c				结束正在执行的命令
键盘上的向上和向下的方向键			向前或者向后显示已经执行过的命令
```

***

#### 4.1.查看文件内容相关命令

```sh
cat
查看文件内容
可以使用下面的参数
-n			显示行号
```

***

```sh
head
默认只能查看文件的前十行内容，可以使用下面的参数
-n 行数				查看文件的前多少行的内容
```

***

```sh
tail
默认只能查看文件的后十行内容，可以使用下面的参数
-n 行数				查看文件的后多少行的内容
-f					  实时更新文件内容
```

***

#### 4.2.man

```sh
man
帮助命令，查看系统自带的命令或者系统调用的帮助内容
```

***

#### 4.3.more

```sh
more
滚动查看文件内容，一次显示一页,会把文件全部加载到内存中，没有特殊需要，就使用less来滚动查看文件内容,了解即可
可以使用下面的快捷键
回车键			往下翻一行
空格键			往下翻一页
ctrl+b        往上翻一页
=			  显示当前的行号
q			  退出more
```

***

#### 4.4.less

```sh
less
滚动查看文件内容，没有特殊需要，就使用该命令来查看文件内容，不要使用more
可以使用下面的快捷键
空格键					往下翻一页
b			  		  往上翻一页
键盘上的向上的方向键     往上查看内容
键盘上的向下的方向键     往下查看内容
q			  		  退出less

还可以加入下面的参数
-N 					 显示每行的行号

在查看文件内容的时候，如果要查找某个字符串，就使用下面的方式
/要查找的字符串			 向后搜索要查找的内容
搜索到要查找的内容后，如果想往后继续查看所有匹配到的内容，就按下n
如果想往前继续查看所有匹配到的内容，就按下shift+n

?要查找的字符串			 向前搜索要查找的内容
搜索到要查找的内容后，如果想往前继续查看所有匹配到的内容，就按下n
如果想往后继续查看所有匹配到的内容，就按下shift+n
```



***

### 5.时间和时区命令

```sh
timedatectl
查看当前时区的命令
```

***

```sh
date
查看当前时间的命令，显示如下
Sat Feb 24 16:01:13 CST 2024
Sat表示今天是周几
Feb表示现在是2月
24表示是24号
16:01:13表示小时，分钟，秒数
CST表示的是中国标准时间
2024表示现在是2024年

可以使用下面的参数
-u				显示utc时间，就是格林尼治标准时间

最常用的就是格式化输出，常用的是下面几个参数，在使用的时候需要把参数先用双引号包起来，然后在最前面使用+号，可以在每个参数之间加入自定义的分隔符，来让显示更加的直观
%Y			完整的4位年份
%y			年份的后两位数字	
%m			月份
%d			日期
%H			按照24小时制显示小时
%I			按照12小时制显示小时
%M			分钟
%S			秒数
%s          时间戳
比如想获取当前时间的年份和月份和日期，然后年月日之间用分隔符-来分开，就使用下面的命令
date "+%Y-%m-%d"
比如想获取当前时间的年份和月份和日期分钟秒数，然后年月日时分秒之间用分隔符--来分开，就使用下面的命令
date "+%Y--%m--%d--%H:%M:%S"
```

***

### 6.其他常用命令

```sh
history
显示历史记录和执行过的指令，如果只想看最近n条历史命令，就可以使用下面的方式
history 20
这样就可以只显示最近的20条历史命令
```

***

### 7.重定向和标准输入输出

```sh
重定向
> 输出重定向，可以输出到文件或者设备，使用的时候需要注意下面几点
1.如果文件不存在，系统会自动创建对应的文件
2.如果文件存在，会覆盖原来的内容，所以在使用的时候需要特别注意
比如，把命令执行的结果保存到一个文件中，可以使用下面的方式
ls > a.txt

如果想清空一个文件里面的所有内容，可以使用下面的方式
> 文件名
比如想把上面的a.txt文件的内容清空，就使用下面的方式
> a.txt
这样就可以把一个文件的内容清空
```

***

```sh
>>
追加重定向,使用的时候需要注意下面几点
1.如果文件不存在，系统会自动创建对应的文件
2.如果文件存在，不会覆盖原来的内容，会在文件的最后添加新增的内容
比如，把命令执行的结果追加到一个文件中，可以使用下面的方式
ls >> b.txt
使用追加重定向就不会覆盖原来的b.txt里面的内容，会在b.txt文件的最后添加新增的内容
```

***

标准输入，标准输出，标准错误输出

```sh
标准输入，表示数据从文件流入到处理的工具或者命令中，使用0表示，使用<或者<<重定向符号来表示数据的流动方向
标准输出，表示数据从工具或者命令中流入到文件中，使用1表示，使用>或者>>重定向符号来表示数据的流动方向
标准错误输出，表示数据从工具或者命令中错误的信息流入到文件中，使用2表示，使用>或者>>重定向符号来表示数据的流动方向
```

具体写法如下：

标准输入

```sh
0<
或者写成下面这样,表示清空已有内容，数据从文件中流向处理的命令
<
也可以使用下面的方式,表示追加内容到底部，数据从文件中流向处理的命令
0<<
或者写出这样，效果是一样的
<<
```

标准输出

```sh
1>
或者写成下面这样,表示先清空文件已有内容，然后把命令的执行结果输出到文件中
>
也可以使用下面的方式,表示把命令的执行结果输出到文件已有内容底部
1>>
或者写出这样，效果是一样的
>>
```

标准错误输出

```sh
2>
或者写成下面这样,表示先清空文件已有内容，然后把命令执行过程中的错误信息输出到文件中，命令执行成功也会清空文件内容(需要注意)
也可以使用下面的方式,表示把命令执行过程中的错误信息输出到文件已有内容底部
2>>
如果想把错误输出和正确输出写到一个文件中，就使用下面的方式
2>&1
```

```shell
cat << EOF >file
file_start
...
file_end
EOF
表示将file_start到file_end之间的内容写入文件file中，如果file文件不存在会创建文件file，存在则会覆盖file文件内容
```

```shell
exec 3>>test13out
将文件描述符3重定向到另一个文件test3out中
1 exec 3>&1
2 exec 1>test14out
3 echo "this is file1"
4 echo "this is file2"
5 exec 1>&3
6 echo "this is file3"
7 echo "this is file4"
#交换文件描述符1和3的输出位置，输出完内容后，再交换回来
```



***

### 8.vim编辑器

vi就是linux系统里面的文本编辑软件，相当于是windows系统里面的记事本
vim就相当于是vi的加强版，vim的语法和vi的语法是一样的，
vim分为三种模式：

```sh
普通模式，编辑模式，命令模式
```

普通模式：

```sh
当使用vim命令打开一个文件后，默认的状态就是普通模式，在这个模式下面，不能对文件进行编辑和输入操作，但是可以按键盘上面的上下左右按键来移动光标，还可以执行复制，删除，粘贴等操作
```

编辑模式：

```sh
在普通模式下，通过按下面任意一个按键，就可以进入编辑模式
i,I,a,A,o,O
一般都是使用i键进入到编辑模式
在编辑模式下，想回到普通模式，就按键盘上面的esc键
```

命令模式:

```sh
在普通模式下，输入下面的任意一个按键，就可以进入命令模式，
:
/
?
在命令模式中，可以执行保存，退出，搜索，替换，显示行号这些操作
```

***

在普通模式下，可以使用快捷键执行下面的操作
移动光标操作

```sh
G            移动到这个文件的最后一行
gg           移动到这个档案的第一行
0            移动到这一行的最前面
$            移动到这一行的最后面
n回车键       n 为数字。光标向下移动 n 行
ngg          n为数字，移动到文件的第n行
```

复制，粘贴，删除操作

```sh
yy           复制光标所在的行
nyy          n为数字，复制光标开始向下共n行
p/P          p表示将已复制的数据粘贴到光标的下一行,P表示粘贴到光标的上一行
dd           删除光标所在的当前行
ndd          n为数字，删除从光标开始向下n行(包含光标)
u            恢复前一个操作
x            向后删除字符    
X            向前删除字符
.            重复前一个执行过的操作
d1G          删除当前行至第一行，包括第一行
dG           删除当前行至最后一行，包括最后一行
d0           删除当前光标文本至行首，包括行首
d$           删除当前光标文本至行尾，包括行尾
```

***

进入编辑模式

```sh
i     在当前光标处插入文字
a     在当前光标所在的下一个字符处插入文字
I     在当前光标所在行的行首第一个非空格处开始插入文字
A     在当前光标所在行的行尾最后一个字符处开始插入文字
O     在当前光标所在行的上一行处插入新的一行
o     在当前光标所在行的下一行处插入新的一行
```

***

命令行模式

```sh
:wq        退出并保存
:q         退出(如果文件没有发生改变，就使用这个命令退出)
:q!        强制退出不保存(如果文件发生改变,但是不想保存这次改变,就使用这个命令退出)
:set nu    显示行号
:set nonu  取消显示行号
```

***

搜索和替换操作

```sh
/要查找的内容     从光标位置开始，向下搜索要查找的内容
?要查找的内容     从光标位置开始，向上搜索要查找的内容
n               从光标位置开始，向下重复前一个搜索操作
N               从光标位置开始，向上重复前一个搜索操作
/root/tsetfile.txt
%s#good#root#g
g/123/s//root/g
```

***

### 9.别名查看设置

```
alias 查看或者设置别名
系统对一些复制删除移动的命令加上-i 选项是为了防止误操作。执行命令的时候相当于执行力设定好的别名
查看
alias

设置别名语法
alias 别名='命令'

执行命令不使用别名
1.执行命令全路径
2.命令最前面加上\

取消别名
unalias 别名
```

***

### 10.查看文件属性

```
file 查看文件属性，有下面几种文件格式
普通文件类型
ASCII text                     纯文本文件
ELF 64-bit LSB executable      二进制文件（可执行文件）
file /bin/cat
data                           数据文件
file /var/log/wtmp
目录文件类型
directory                      目录
链接文件
symbolic link to `sr0'
file /dev/cdrom
套接字文件
socket
file /dev/log
块设备文件，比如磁盘，光驱，u盘
block special
file /dev/sr0
字符设备文件，键盘，鼠标
character special
file /dev/tty18
还有一个管道文件，基本碰不到，知道有这个概念就可以了
```

***

#### 10.1.文件基本属性讲解

```shell
ls-l 可以查看文件/文件夹的详细属性
[root@10-255-20-182 ~]# ls -l /
total 16
-rw-r--r--   1 root root    0 Dec 16 16:44 123
lrwxrwxrwx.  1 root root    7 Mar  2  2018 bin -> usr/bin
dr-xr-xr-x.  5 root root 4096 Dec 13  2019 boot
drwxr-xr-x  17 root root 2700 Dec 16 11:43 dev
drwxr-xr-x. 80 root root 8192 Dec 16 17:49 etc
drwxr-xr-x.  5 root root   47 Dec 16 17:08 home
lrwxrwxrwx.  1 root root    7 Mar  2  2018 lib -> usr/lib
lrwxrwxrwx.  1 root root    9 Mar  2  2018 lib64 -> usr/lib64
drwxr-xr-x.  2 root root    6 Nov  5  2016 media
drwxr-xr-x.  2 root root    6 Nov  5  2016 mnt
drwxr-xr-x.  2 root root   87 Dec 16 17:16 opt
dr-xr-xr-x  99 root root    0 Dec 16 11:43 proc
dr-xr-x---.  4 root root  246 Dec 16 17:05 root

共九列
第一列 文件属性跟相关权限
第二列 硬链接数
第三列 用户
第四列 用户组
第五列 文件大小
第六列 文件月份
第七列 文件日期
第八列 文件修改时间
第九列 文件名
```

***

#### 10.2.文件三种时间状态

```shell
stat查看时间状态
[root@10-255-20-182 ~]# stat test.txt 
  File: ‘test.txt’
  Size: 37        	Blocks: 8          IO Block: 4096   regular file
Device: fd01h/64769d	Inode: 4197812     Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2020-12-17 09:56:03.617642308 +0800
Modify: 2020-12-17 09:56:03.617642308 +0800
Change: 2020-12-17 09:56:03.620642304 +0800
 Birth: -

Access 访问时间，如果文件属性里面有可执行权限，那么使用cat，less，more 这种命令进行查看，访问时间会改变，使用VIM编辑器查看，访问时间就不会改变，(如果文件属性里面没有可执行权限，那么使用VIM编辑器查看，访问时间也会改变,不一定)
Modify 修改时间，只有文件内容发生变化的时候，修改时间才会发生变化，使用vim的时候，如果使用了wq，不管有没有修改文件内容，时间都会变
Change 状态修改时间，状态信息包含 文件大小，文件权限，文件内容发生变化，时间也会改变，使用vim的时候，如果使用了wq，不管有没有修改文件内容，时间都会变
特别说明:ls命令显示的文件的时间，默认就是文件的修改时间，如果想使用让ls命令能够显示文件的状态修改时间，就需要添加
--time=ctime
参数
文件的访问时间，一般是不需要查看的，如果想要看，那么就使用下面的参数
--time=atime
```

### 11.查找命令全路径

```
1.which 
查找命令所在路径,根据系统变量$PATH里面的路径进行查找
[root@yangjun tree1]# which expect
/usr/bin/expect

2.whereis 
查看命令所在路径+帮助文档，很少使用，了解即可
[root@yangjun tree1]# whereis expect
expect: /usr/bin/expect /usr/share/man/man1/expect.1.gz
```

#### 11.1.查找文件所在位置locate

```shell
locate 
查找文件命令，注意/tmp目录里面的文件，是查找不到的，因为/tmp是临时目录，数据库文件里面不记录临时目录的内容
基于自身的数据库进行查找文件/var/lib/mlocate/mlocate.db
速度非常快，因为不需要遍历文件系统，是直接从数据库文件里面进行查找的
系统会每天更新一次mlocate.db数据库文件（需要手动配置），所以今天添加的文件或者目录，明天使用
locate才能找到
如果想手动更新mlocate.db数据库文件，就使用下面的命令
updatedb
注意：updatedb命令会非常消耗时间，如果是在生产环境中，千万不要使用updatedb命令来更新数据库文件
```

***

#### 11.2.find

```sh
find
查找文件命令
语法如下：
find 要查找的目录 要添加的查找条件 查找到对应的文件后要执行的操作
find命令是从硬盘开始查找的，所以查找速度没有locate命令快，所以在使用find命令的时候，定位要查找的目录需要更加的精确一点，这样可以加快查找速度，千万不要从根目录开始查找，那样会非常的消耗系统性能
find命令查找，是递归进行的，会对要查找的目录里面的子子孙孙目录都进行查找，如果想要限制要查找的层级就使用-maxdepth num参数，num就是要限制的层级的具体数字，需要写在其他参数的前面
要添加的查找条件有下面这些参数可以使用
-name  按照文件名查找文件
-perm  按照文件权限来查找文件。
-user  按照文件属主来查找文件。
-group 按照文件所属的组来查找文件。较少使用
-mtime -n +n 按照文件的更改时间来查找文件， -n表示文件更改时间距现在n天以内，+n 表示文件更改时间距现在n天以前。
-type 查找某一类型的文件，诸如：
      b - 块设备文件。
      d - 目录。
      c - 字符设备文件。
      p - 管道文件。
      l - 符号链接文件。
      f - 普通文件。
      s - socket文件
-size [+-]size[ckMG]：按文件大小查找，支持使用 `+` 或 `-` 表示大于或小于指定大小，单位可以是 `c`（字节）、`k`（KB）、`M`（MB）或 `G`（GB）
特别注意：如果是-1k或者-1M或者-1G那么就都是找大小为0的文件
如果想找，就需要换成另外一个较小的单位，比如要找小于1k的文件，那么就需要写成
-1024c
其他的-1M或者-1G以此类推
如果-size后面不跟+-那么就是表示等于的意思，就是精准查找
但是如果是 -size 1k
或者1M或者1G那么就都是找大小为大于0或者小于1k的文件
如果想找大小等于1k的文件，那么必须要换成另外一个较小的单位
-size 1024c
这样就可以找到大小等于1k的文件

-maxdepth num   最大深度限制
下面的几个和时间相关的参数，用的不多，了解就可以
-amin n  查找系统中最后N分钟访问的文件
-atime -n 查找系统中最后n天内访问的文件
-cmin -n  查找系统中最后N分钟内被改变文件状态的文件
-ctime -n 查找系统中最后n天内被改变文件状态的文件
-mmin -n：查找在n分钟内被修改过的文件
-mtime -n：查找在n天内被修改过的文件
**********************************************************************
查找到对应的文件后要执行的操作有下面几个参数可以使用
-print      默认就是这个参数，把find命令查找到的文件输出到标准输出
-exec       对find命令查找到的文件执行参数后面所给出的shell命令，对应的形式为
            shell命令 {}
            {}的意思就是把匹配到的文件交给shell命令进行处理            
            最后还要跟上\;表示命令结束
-ok         作用和-exec是一样的，只是以更安全的方式来执行shell命令，在执行shell命令的时候，会给出用户提示            
```

例8：

<img src="F:\运维笔记\笔记\图片\find.PNG" style="zoom:80%;" />

```shell
xargs 是将管道前的内容当作参数进行处理，用于批量化处理数据
exec  用于替换当前的shell进程，执行新的命令，不会创建新的子进程，直接替换当前进程，将find命令的输出当作文本进行处理
```

```shell
server_id: "{{ server_id_start + play_hosts.index(inventory_hostname) }}" 是 Ansible 中用于动态生成唯一 server_id 的表达式。它的作用是根据每台主机在 Ansible 清单中的位置，计算出一个唯一的 server_id。下面详细解释它的含义：

1. server_id_start
这是一个变量，表示 server_id 的起始值。

例如，如果 server_id_start: 100，那么第一台主机的 server_id 将从 100 开始。

2. play_hosts
play_hosts 是 Ansible 的一个特殊变量，表示当前 Playbook 运行的所有主机的列表。

它是一个列表，包含了当前 Playbook 中所有目标主机的名称（inventory_hostname）。

3. inventory_hostname
inventory_hostname 是 Ansible 的另一个特殊变量，表示当前正在执行任务的主机的名称。

例如，如果当前主机在清单文件中的名称是 host1，那么 inventory_hostname 的值就是 host1。

4. play_hosts.index(inventory_hostname)
play_hosts.index(inventory_hostname) 的作用是获取当前主机在 play_hosts 列表中的索引（位置）。

索引从 0 开始。例如：

如果当前主机是 play_hosts 列表中的第一台主机，索引为 0。

如果是第二台主机，索引为 1，以此类推。

5. server_id_start + play_hosts.index(inventory_hostname)
这个表达式的作用是：

以 server_id_start 为基准值。

加上当前主机在 play_hosts 列表中的索引。

最终生成一个唯一的 server_id。
```

